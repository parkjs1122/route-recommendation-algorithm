# 개별 운전자 선호 도로 분석 기반 경로 추천 알고리즘
## 문제 분석
### 개별 운전자의 선호도가 반영된 경로 안내 알고리즘 부재
> #### 현재 현대자동차 및 경쟁사들의 네비게이션 시스템은 개별 운전자의 선호 도로 정보가 경로 안내에 반영되지 않음. → 운전자들이 네비게이션을 신뢰하지 못함.
> #### 예시 사례
> * 운전자 A : 어린이 보호 구역을 지나가면 30km/h 이하로 천천히 주행해야 하기 때문에 일부러 돌아서 간다.
> * 운전자 B : 단속카메라가 있는 넓은 도로를 이용하면 오히려 시간이 오래 걸려 조금 좁더라도 단속카메라가 없는 도로를 이용한다.
> #### 현재 발생 가능한 문제
> * 운전자 A : 네비게이션이 가장 빠른 경로이지만 어린이 보호구역이 있는 길로 안내해줘서 A는 해당 경로를 이동할 때 더 이상 네비게이션을 사용하지 않게 되었다.
> * 운전자 B : 네비게이션이 단속카메라가 있는 도로로 안내해주어 주행 중에 굳이 네비게이션을 사용하지 않게 되었다.


## 문제 해결 방안
### 주행패턴 분석으로 개별 운전자의 선호 도로를 파악
> #### 개별 운전자의 주행패턴을 분석하여 각 운전자가 선호할 확률이 높은 경로를 추천하는 알고리즘을 개발하여 탑재
> #### 신규 알고리즘을 통한 예시 사례 문제 해결 방안
> * 운전자 A : 최적 경로 보다 많은 시간이 소요되지 않는 어린이 보호구역이 없는 길을 안내해줘야 한다.
> * 운전자 B : 최적 경로 보다 많은 시간이 소요되지 않는 단속카메라가 없는 경로를 안내해 주어야 한다.
> #### 개별 운전자가 선호하는 경로를 추천해줌으로써 네비게이션의 신뢰도가 향상되고, 운전자들의 네비게이션 이용률이 증가해 향후 차량 주행 정보 데이터 축적에 긍정적인 영향을 줄 것으로 예상됨.


## 과제 목표
### 개별 운전자 선호도를 반영한 경로 추천 알고리즘 적용 가능성 확인
> #### 신규 알고리즘 성능 확인
> * 특정 요인을 이용하여 개별 운전자의 선호도를 경로 탐색에 반영할 수 있는가?
> * 운전자가 충분히 납득할 수 있는 수준의 trade-off(소요시간과 선호도로)를 보이는가?
> #### 신규 알고리즘 적용 가능성 확인
> * 네비게이션 또는 서버의 하드웨어 자원은 한정돼 있기 때문에 기존 알고리즘에 비해 많은 연산이 필요한지 고려해야 함
> #### 2가지 사항을 모두 만족한다면 기존 알고리즘을 충분히 대체할 수 있을 것으로 판단


## 선행기술 조사 및 적용방안
### 기존의 최적 경로탐색 알고리즘 조사 및 적용방안 도출
> #### Dijkstra(다익스트라) 알고리즘
> * 그래프 자료구조에서 구현 가능
> * 시작 지점부터 각각의 모든 지점을 탐색하며 도달거리 또는 소요시간을 구하여 최적 경로를 안내
> * 항상 최단거리 또는 최소시간 경로를 구하기 때문에 운전자의 선호도를 반영하지 못함
> #### A*(에이스타) 알고리즘
> * 그래프 자료구조에서 구현 가능
> * 휴리스틱(배경지식)을 이용하여 단일 최적 경로를 구함
> * 기존에는 목적지까지의 거리 또는 소요시간을 휴리스틱 함수로 사용하고 있어 운전자의 선호도를 반영하지 못함
> #### 개선된 A* 알고리즘과 Dijkstra 알고리즘을 함께 이용하여 개별 운전자의 선호도가 반영된 경로 추천 알고리즘을 개발


## 신규 알고리즘 소개
### 개별 운전자 주행패턴 분석과 패턴교통정보를 기반으로 최단 선호 경로를 추천
> #### 개별 운전자 주행패턴 분석
> * 실(實)주행 경로 파악 : 운전자가 네비게이션 경로 안내를 받지 않고 임의로 주행한 경로
>   * 개별 운전자 주행 데이터를 기반으로 출발지부터 도착지까지 각 운전자가 실제로 주행한 경로를 파악
> * 비(非)주행 최적 경로 파악 : 운전자가 네비게이션으로 부터 최적 경로 안내를 받았을 경우의 주행 경로
>   * 각 운전자가 주행하지 않은 출발지부터 도착지까지의 최적 경로 파악
> * 실주행 경로와 비주행 최적 경로 간의 차이점 파악
>   * 각 경로의 도로 환경 요인들의 출몰 횟수를 파악한 뒤 운전자의 선호 도로 특성 분석
>     * 도로 환경 요인 : 어린이 보호 구역, 신호등, 교차로, 단속카메라(주행속도), 도로 차선 수
> * 휴리스틱 함수에 반영
>   * 각 경로별 도로 환경 요인 출몰 횟수를 통해 계수를 구하여 경로 탐색에 반영
> #### 패턴교통정보
> * 기존 알고리즘과 같이 이동 시간 정보(1시간 단위 가상데이터, 총 24시간)를 반영하여 최단 선호 경로 탐색
> #### 개별 운전자 주행패턴 분석
> * 신규 알고리즘을 통해서 기존 알고리즘의 최소 시간 경로에 비해 소요 시간이 큰 차이가 나지 않는 개별 운전자 선호도 반영 추천 경로를 제시해줌


## 과제수행 과정 (1) - 가상 지도 데이터 생성 (1)
### 알고리즘 시뮬레이션을 위한 가상 지도 데이터 생성
> #### Daum Map API를 활용하여 아래의 정보들을 각각의 파일로 생성 및 관리
> #### Graph 기반 가상 지도 데이터
> * Node는 위도와 경도 정보를 포함하고 있음
> * Edge는 거리 정보를 포함하고 있음
> #### 도로 환경 정보
> * Daum Map을 육안으로 확인하여 얻을 수 있는 정보를 수집 : 어린이 보호 구역, 신호등, 교차로, 단속카메라, 차선 수
> #### 패턴교통정보
> * 간선의 0~23시 이동 소요 시간 데이터


## 과제수행 과정 (1) - 가상 지도 데이터 생성 (2)
### 지도 데이터 생성 과정 (1)
![지도생성 1](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/map_making_1.png)


## 과제수행 과정 (1) - 가상 지도 데이터 생성 (3)
### 지도 데이터 생성 과정 (2)
![지도생성 1](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/map_making_2.png)


## 과제수행 과정 (2) - 개별 운전자 주행패턴 분석
### 주행경로 분석 알고리즘을 이용한 개별 운전자 선호 도로 특성 파악
> #### 개별 운전자 선호 도로 특성 분석
> * 지속적으로 실주행 경로와 비주행 최단 경로 간의 차이를 분석하여 개별 운전자의 선호 도로 특성을 파악하여 계수를 갱신
> #### 개별 운전자 선호 도로 특성을 계수로 표현
> * 아래의 어린이 보호구역, 신호등, 교차로, 단속카메라를 선호하는 운전자는 없기 때문에 max 함수로 계수가 음수가 되는 경우를 방지하였음
> * 계수 a, b, c, d는 값이 클수록 더 회피하고, 계수 e는 값이 클수록 더 경로에 반영
>   * 𝑎 : (비주행 경로 어린이 보호 구역 수)/(실주행 경로 어린이 보호 구역 수+비주행 경로 어린이 보호 구역 수)×100 (0≤𝑎≤100)
>   * 𝑏 : (비주행 경로 신호등 수)/(실주행 경로 신호등 수+비주행 경로 신호등 수)×100 (0≤𝑏≤100)
>   * 𝑐 : (비주행 경로 교차로 수)/(실주행 경로 교차로 수+비주행 경로 교차로 수)×100 (0≤𝑐≤100)
>   * 𝑑 : (비주행 경로 단속카메라 수)/(실주행 경로 단속카메라 수+비주행 경로 단속카메라 수)×100 (0≤𝑑≤100)
>   * 𝑒 : (실주행 경로 평균 도로 너비)/(실주행 경로 평균 도로 너비+비주행 경로 평균 도로 너비)×100 (0≤𝑒≤100)
> #### 현실성 반영 방법 적용
> * '누적 계수 주행거리 : 신규 계수 주행거리'의 비율로 계수를 갱신하여 계수가 크게 변화하는 문제를 방지
> * 각 비주행, 실주행 경로 도로특성 출몰횟수 합계가 0일 경우는 해당 도로특성의 계수를 갱신하지 않음


## 과제수행 과정 (3) - 개인별 추천 경로 생성 (1)
### 개별 운전자 주행패턴 분석 및 패턴교통정보 데이터를 기반으로 개인별 추천 경로 생성
> #### 휴리스틱 알고리즘을 이용해 예상 주행 거리 및 도로 환경 요인 출몰 횟수를 경로 선정에 반영
> #### 𝐹(𝑛) = 𝐺(𝑛)+(𝑇(𝑛)+𝑎∙𝐴(𝑛)+𝑏∙𝐵(𝑛)+𝑐∙𝐶(𝑛)+𝑑∙𝐷(𝑛)−𝑒∙𝐸(𝑛))
> * 𝐺(𝑛) : 출발지부터 노드 𝑛까지의 소요 시간
> * 𝑇(𝑛) : 노드 𝑛 부터 도착지까지의 최적 경로 소요 시간
> * 𝐴(𝑛) : 노드 𝑛 부터 도착지까지의 최단경로 상 어린이 보호 구역 출몰 횟수
> * 𝐵(𝑛) : 노드 𝑛 부터 도착지까지의 최단경로 상 신호등 출몰 횟수
> * 𝐶(𝑛) : 노드 𝑛 부터 도착지까지의 최단경로 상 교차로 출몰 횟수
> * 𝐷(𝑛) : 노드 𝑛 부터 도착지까지의 최단경로 상 과속카메라 출몰 횟수
> * 𝐸(𝑛) : 노드 𝑛 부터 도착지까지의 최단경로의 평균 도로 너비
> #### 예상 도착 시간 및 경로 상 도로 특성 안내


## 과제수행 과정 (3) - 개인별 추천 경로 생성 (2)
### 어린이 보호구역과 신호등을 회피하는 운전자 예시 (a =100, b=70, c=0, d=0, e=0)
![휴리스틱 함수 예시](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/heuristic_example_1.png)


## 과제수행 과정 (3) - 개인별 추천 경로 생성 (3)
### 어린이 보호구역과 신호등을 회피하는 운전자 예시 (a =100, b=70, c=0, d=0, e=0)
![휴리스틱 함수 예시](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/heuristic_example_2.png)


## 과제수행 결과 (1)
### 개인별 추천 경로 생성 예시 – 경로 (A)
> #### 경로 (A)는 최소 시간 경로 상 어린이 보호구역이 2개 존재하는 경로
> #### 운전자 A : 어린이 보호구역 회피를 가장 선호하고 신호등 회피도 조금 선호하므로 어린이 보호구역이 1개 적고 신호등이 3개 적은 경로를 추천
> #### 운전자 B : 어린이 보호구역 회피를 선호하지는 않아 최소시간 경로를 추천
> #### 운전자 A는 두 경로의 소요시간 차이가 1분이고, 운전자 B는 두 경로의 소요시간 차이가 없음
![시뮬레이션 1](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/simulation_example_1.png)


## 과제수행 결과 (2)
### 개인별 추천 경로 생성 예시 – 경로 (B)
> #### 경로 (B)는 최소 시간 경로 상 어린이 보호구역과 단속카메라가 1개씩 존재하는 경로
> #### 운전자 A : 어린이 보호구역 회피를 가장 선호하고 신호등 회피도 조금 선호하므로 어린이 보호구역과 신호등이 없는 경로를 추천
> #### 운전자 B : 단속카메라 회피를 선호하므로 단속카메라가 없는 경로를 추천
> #### 운전자 A는 두 경로의 소요시간 차이가 없고, 운전자 B는 두 경로의 소요시간 차이가 1분임
![시뮬레이션 2](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/simulation_example_2.png)


## 과제수행 결과 (3)
### 개인별 추천 경로 생성 예시 – 경로 (C)
> #### 경로 (C)는 최소 시간 경로 상 단속카메라가 3개 존재하는 경로
> #### 운전자 A : 어린이보호구역 회피를 가장 선호하므로 어린이 보호구역이 없는 경로를 추천
> #### 운전자 B : 단속카메라 회피를 선호하므로 단속카메라가 2개 적은 경로를 추천
> #### 운전자 A는 두 경로의 소요시간 차이가 없고, 운전자 B는 두 경로의 소요시간 차이가 1분임
![시뮬레이션 3](https://github.com/parkjs1122/Projects/blob/master/Graduation%20Project/PPT/simulation_example_2.png)


## 과제 성과 및 개선방안
### 과제수행을 통한 가능성 확인 및 개선이 필요한 부분 파악
> #### 과제 성과
> * 개별 운전자 선호도 반영 경로 추천 알고리즘 가능성 확인
>	* 휴리스틱 알고리즘을 이용해 최소 시간 경로와 큰 차이가 나지 않으면서 개별운전자의 선호도를 반영한 경로를 추천해줄 수 있음을 확인
> * 실제 적용 가능한 수준의 성능 확인
>	* 기존 알고리즘에 비해 구동 성능을 저하시키지 않고서도 개별 운전자의 선호도를 경로 안내에 반영할 수 있음을 확인하였음
> #### 개선방안
> * 선호도를 파악할 수 있는 요인이 적음
>	* 운전자의 선호도를 반영할 수 있는 다양한 요인을 고려하여 휴리스틱 알고리즘 성능을 개선해 나가야 함
> * 가상 패턴 교통 정보 데이터
>	* 실제 패턴 교통 정보 데이터를 반영하여 좌회전과 같은 특수한 상황을 고려한 현실적인 이동 시간을 반영하여야 함
